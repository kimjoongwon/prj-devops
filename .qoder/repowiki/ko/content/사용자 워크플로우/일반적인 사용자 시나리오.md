# ì¼ë°˜ì ì¸ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

<cite>
**ì´ ë¬¸ì„œì—ì„œ ì°¸ì¡°ëœ íŒŒì¼**
- [README.md](file://README.md)
- [deploy-libraries.sh](file://scripts/deploy-libraries.sh)
- [deploy-stg.sh](file://scripts/deploy-stg.sh)
- [deploy-prod.sh](file://scripts/deploy-prod.sh)
- [deploy-all.sh](file://scripts/deploy-all.sh)
- [app-of-apps.yaml](file://environments/argocd/app-of-apps.yaml)
- [plate-web-stg.yaml](file://environments/argocd/apps/plate-web-stg.yaml)
- [plate-api-stg.yaml](file://environments/argocd/apps/plate-api-stg.yaml)
- [plate-llm-stg.yaml](file://environments/argocd/apps/plate-llm-stg.yaml)
- [values-stg.yaml](file://helm/applications/plate-web/values-stg.yaml)
- [values-stg.yaml](file://helm/applications/plate-api/values-stg.yaml)
- [values-stg.yaml](file://helm/applications/plate-llm/values-stg.yaml)
- [values.yaml](file://helm/cluster-services/cert-manager/values.yaml)
- [values.yaml](file://helm/development-tools/argocd/values.yaml)
- [values.yaml](file://helm/development-tools/harbor/values.yaml)
</cite>

## ëª©ì°¨
1. [ì „ì²´ ì¸í”„ë¼ ë° ê°œë°œ ë„êµ¬ ë°°í¬](#ì „ì²´-ì¸í”„ë¼-ë°-ê°œë°œ-ë„êµ¬-ë°°í¬)
2. [ìŠ¤í…Œì´ì§• í™˜ê²½ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬](#ìŠ¤í…Œì´ì§•-í™˜ê²½-ì• í”Œë¦¬ì¼€ì´ì…˜-ë°°í¬)
3. [í”„ë¡œë•ì…˜ í™˜ê²½ ë°°í¬](#í”„ë¡œë•ì…˜-í™˜ê²½-ë°°í¬)
4. [ë°°í¬ í›„ ìƒíƒœ í™•ì¸ ë° ëª¨ë‹ˆí„°ë§](#ë°°í¬-í›„-ìƒíƒœ-í™•ì¸-ë°-ëª¨ë‹ˆí„°ë§)
5. [ë¬¸ì œ ë°œìƒ ì‹œ ë¡¤ë°±](#ë¬¸ì œ-ë°œìƒ-ì‹œ-ë¡¤ë°±)

## ì „ì²´ ì¸í”„ë¼ ë° ê°œë°œ ë„êµ¬ ë°°í¬

ì´ ì‹œë‚˜ë¦¬ì˜¤ëŠ” `deploy-libraries.sh` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„° ë ˆë²¨ ì„œë¹„ìŠ¤ì™€ ê°œë°œ ë„êµ¬ë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì„ ì„¤ëª…í•©ë‹ˆë‹¤. ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì¸í”„ë¼ ê³„ì¸µê³¼ ë„êµ¬ ê³„ì¸µì„ ìˆœì°¨ì ìœ¼ë¡œ ë°°í¬í•˜ì—¬ ì•ˆì •ì ì¸ ê¸°ë°˜ í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

### ë°°í¬ ì ˆì°¨

1.  **ì‚¬ì „ ì¤€ë¹„ì‚¬í•­ í™•ì¸**: ìŠ¤í¬ë¦½íŠ¸ëŠ” Helmê³¼ kubectlì´ ì„¤ì¹˜ë˜ì–´ ìˆê³ , Kubernetes í´ëŸ¬ìŠ¤í„°ì— ì—°ê²° ê°€ëŠ¥í•œì§€ í™•ì¸í•©ë‹ˆë‹¤.
2.  **í´ëŸ¬ìŠ¤í„° ì„œë¹„ìŠ¤ ë°°í¬**: cert-manager, MetalLB, NFS í”„ë¡œë¹„ì €ë„ˆë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. ì´ë“¤ì€ í´ëŸ¬ìŠ¤í„°ì˜ ê¸°ë³¸ ì¸í”„ë¼ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
3.  **ê°œë°œ ë„êµ¬ ë°°í¬**: ArgoCD, Jenkins, Kubernetes ëŒ€ì‹œë³´ë“œì™€ ê°™ì€ ìš´ì˜ ë° ê°œë°œ ë„êµ¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

### ëª…ë ¹ì–´ ì˜ˆì œ

```bash
# í´ëŸ¬ìŠ¤í„° ì„œë¹„ìŠ¤ì™€ ê°œë°œ ë„êµ¬ ë°°í¬
./scripts/deploy-libraries.sh
```

### ì˜ˆìƒ ì¶œë ¥

ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í›„ ë‹¤ìŒê³¼ ìœ ì‚¬í•œ ì¶œë ¥ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤:

```
[INFO] Starting libraries deployment...
[INFO] Deploying cert-manager...
[INFO] cert-manager deployed successfully
[INFO] Deploying Jenkins...
[INFO] Jenkins deployed successfully
[INFO] Deploying MetalLB...
[INFO] MetalLB deployed successfully
[INFO] All libraries deployed successfully!
```

### ì„±ê³µ ê¸°ì¤€

-   `kubectl get pods -n cert-manager`, `kubectl get pods -n jenkins`, `kubectl get pods -n metallb-system` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, ëª¨ë“  íŒŒë“œê°€ `Running` ìƒíƒœì—¬ì•¼ í•©ë‹ˆë‹¤.
-   `helm list -A` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, `cert-manager`, `jenkins`, `metallb` ë¦´ë¦¬ìŠ¤ê°€ ëª©ë¡ì— í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

**Section sources**
- [README.md](file://README.md#L119-L130)
- [deploy-libraries.sh](file://scripts/deploy-libraries.sh#L104-L115)

## ìŠ¤í…Œì´ì§• í™˜ê²½ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬

ì´ ì‹œë‚˜ë¦¬ì˜¤ëŠ” `deploy-stg.sh` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¤í…Œì´ì§• í™˜ê²½ì— `plate-web`, `plate-api`, `plate-llm` ë“±ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Helmê³¼ ArgoCDë¥¼ í†µí•´ ë°°í¬í•˜ëŠ” ì ˆì°¨ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.

### ë°°í¬ ì ˆì°¨

1.  **ì‚¬ì „ ì¤€ë¹„ì‚¬í•­ í™•ì¸**: Helmê³¼ kubectlì´ ì„¤ì¹˜ë˜ì–´ ìˆê³ , í´ëŸ¬ìŠ¤í„°ì— ì—°ê²° ê°€ëŠ¥í•œì§€ í™•ì¸í•©ë‹ˆë‹¤.
2.  **ì°¨íŠ¸ ê²€ì¦**: `helm lint` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Helm ì°¨íŠ¸ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.
3.  **ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±**: `plate-stg` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
4.  **ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬**: `helm upgrade --install` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ê° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•©ë‹ˆë‹¤.
5.  **ìƒíƒœ í™•ì¸**: ë°°í¬ í›„ íŒŒë“œ, ì„œë¹„ìŠ¤, ì¸ê·¸ë ˆìŠ¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

### ëª…ë ¹ì–´ ì˜ˆì œ

```bash
# ìŠ¤í…Œì´ì§• í™˜ê²½ì— ë°°í¬
./scripts/deploy-stg.sh

# ë˜ëŠ” ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©
./scripts/deploy-all.sh staging
```

### ì˜ˆìƒ ì¶œë ¥

ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í›„ ë‹¤ìŒê³¼ ìœ ì‚¬í•œ ì¶œë ¥ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤:

```
[INFO] Starting staging environment deployment...
[INFO] Validating Helm chart...
[INFO] Chart validation passed
[INFO] Creating namespace: plate-stg
[INFO] Deploying fe-web-stg to plate-stg namespace...
[INFO] Deployment completed successfully
[INFO] Deployment Status:
NAME                             READY   STATUS    RESTARTS   AGE
fe-web-stg-7d8f9b4c5d-abc12     1/1     Running   0          2m
[INFO] Access Information:
Web Application: https://stg.cocdev.co.kr
```

### ì„±ê³µ ê¸°ì¤€

-   `kubectl get pods -n plate-stg` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, `plate-web`, `plate-api`, `plate-llm` ê´€ë ¨ íŒŒë“œê°€ `Running` ìƒíƒœì—¬ì•¼ í•©ë‹ˆë‹¤.
-   `kubectl get ingress -n plate-stg` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, ê° ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¸ê·¸ë ˆìŠ¤ ë¦¬ì†ŒìŠ¤ê°€ ìƒì„±ë˜ì–´ì•¼ í•˜ë©°, `ADDRESS` í•„ë“œì— IP ì£¼ì†Œê°€ í• ë‹¹ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
-   `https://stg.cocdev.co.kr` ì£¼ì†Œë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

**Section sources**
- [README.md](file://README.md#L131-L143)
- [deploy-stg.sh](file://scripts/deploy-stg.sh#L133-L144)
- [plate-web-stg.yaml](file://environments/argocd/apps/plate-web-stg.yaml)
- [plate-api-stg.yaml](file://environments/argocd/apps/plate-api-stg.yaml)
- [plate-llm-stg.yaml](file://environments/argocd/apps/plate-llm-stg.yaml)
- [values-stg.yaml](file://helm/applications/plate-web/values-stg.yaml)
- [values-stg.yaml](file://helm/applications/plate-api/values-stg.yaml)
- [values-stg.yaml](file://helm/applications/plate-llm/values-stg.yaml)

## í”„ë¡œë•ì…˜ í™˜ê²½ ë°°í¬

ì´ ì‹œë‚˜ë¦¬ì˜¤ëŠ” `deploy-prod.sh` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•ˆì •ì ì¸ ìš´ì˜ í™˜ê²½ì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤. ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì•ˆì „ì¥ì¹˜ë¥¼ í¬í•¨í•˜ì—¬ ì‹¤ìˆ˜ë¡œ ì¸í•œ í”¼í•´ë¥¼ ìµœì†Œí™”í•©ë‹ˆë‹¤.

### ë°°í¬ ì ˆì°¨

1.  **ì‚¬ìš©ì í™•ì¸ í”„ë¡¬í”„íŠ¸**: ì‚¬ìš©ìì—ê²Œ í”„ë¡œë•ì…˜ ë°°í¬ì„ì„ ê²½ê³ í•˜ê³ , ëª…ì‹œì ì¸ í™•ì¸ì„ ìš”êµ¬í•©ë‹ˆë‹¤.
2.  **í´ëŸ¬ìŠ¤í„° í™•ì¸**: ì—°ê²°ëœ í´ëŸ¬ìŠ¤í„° ì´ë¦„ì— `prod` ë˜ëŠ” `production`ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
3.  **ë°±ì—… ìƒì„±**: í˜„ì¬ ë°°í¬ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„¤ì •ê³¼ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ë°±ì—… ë””ë ‰í„°ë¦¬ì— ì €ì¥í•©ë‹ˆë‹¤.
4.  **ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬**: `helm upgrade --install` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•©ë‹ˆë‹¤.
5.  **í—¬ìŠ¤ ì²´í¬ ê²€ì¦**: ë°°í¬ í›„ íŒŒë“œê°€ ì¤€ë¹„ ìƒíƒœê°€ ë  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ê³ , ë¡¤ì•„ì›ƒ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

### ëª…ë ¹ì–´ ì˜ˆì œ

```bash
# í”„ë¡œë•ì…˜ ë°°í¬
./scripts/deploy-all.sh production
```

### ì˜ˆìƒ ì¶œë ¥

ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í›„ ë‹¤ìŒê³¼ ìœ ì‚¬í•œ ì¶œë ¥ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤:

```
[WARN] âš ï¸  PRODUCTION DEPLOYMENT WARNING âš ï¸
You are about to deploy to PRODUCTION environment!
This may impact live users and services.
Are you sure you want to continue? (type 'yes' to confirm): yes
[INFO] Connected to cluster: prod-cluster
[INFO] Creating backup of current deployment...
[INFO] Backup saved to: ./backups/20240101-120000
[INFO] Deploying fe-web-prod to plate-prod namespace...
[INFO] Production deployment completed successfully
[INFO] ğŸš€ Production deployment is live!
```

### ì„±ê³µ ê¸°ì¤€

-   `kubectl get pods -n plate-prod` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, ëª¨ë“  íŒŒë“œê°€ `Running` ìƒíƒœì—¬ì•¼ í•©ë‹ˆë‹¤.
-   `kubectl rollout status deployment -n plate-prod <deployment-name>` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, `deployment "..." successfully rolled out` ë©”ì‹œì§€ê°€ ì¶œë ¥ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
-   `https://cocdev.co.kr` ì£¼ì†Œë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

**Section sources**
- [README.md](file://README.md#L239-L246)
- [deploy-prod.sh](file://scripts/deploy-prod.sh#L242-L260)
- [values.yaml](file://helm/development-tools/argocd/values.yaml)
- [values.yaml](file://helm/development-tools/harbor/values.yaml)

## ë°°í¬ í›„ ìƒíƒœ í™•ì¸ ë° ëª¨ë‹ˆí„°ë§

ë°°í¬ í›„ì—ëŠ” ì‹œìŠ¤í…œì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ëª¨ë‹ˆí„°ë§í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì´ ì„¹ì…˜ì—ì„œëŠ” ìƒíƒœ í™•ì¸ ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

### ëª…ë ¹ì–´ ì˜ˆì œ

```bash
# ìŠ¤í…Œì´ì§• ìƒíƒœ í™•ì¸
./scripts/deploy-stg.sh status

# í”„ë¡œë•ì…˜ ìƒíƒœ í™•ì¸
./scripts/deploy-prod.sh status
```

### ì˜ˆìƒ ì¶œë ¥

ìƒíƒœ í™•ì¸ ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤:

-   **ë¦´ë¦¬ìŠ¤ ìƒíƒœ**: Helm ë¦´ë¦¬ìŠ¤ì˜ í˜„ì¬ ìƒíƒœ(ì˜ˆ: `Deployed`)
-   **íŒŒë“œ ìƒíƒœ**: ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ëª¨ë“  íŒŒë“œì˜ ì´ë¦„, ì¤€ë¹„ ìƒíƒœ, ìƒíƒœ, ì¬ì‹œì‘ íšŸìˆ˜, ì‹¤í–‰ ì‹œê°„
-   **ì„œë¹„ìŠ¤ ìƒíƒœ**: ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ëª¨ë“  ì„œë¹„ìŠ¤ì˜ ì´ë¦„, ìœ í˜•, í´ëŸ¬ìŠ¤í„° IP, ì™¸ë¶€ IP, í¬íŠ¸
-   **ì¸ê·¸ë ˆìŠ¤ ìƒíƒœ**: ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ëª¨ë“  ì¸ê·¸ë ˆìŠ¤ ë¦¬ì†ŒìŠ¤ì˜ ì´ë¦„, í˜¸ìŠ¤íŠ¸, ì£¼ì†Œ, í¬íŠ¸, ë°±ì—”ë“œ

### ì„±ê³µ ê¸°ì¤€

-   ì¶œë ¥ëœ ëª¨ë“  íŒŒë“œì˜ ìƒíƒœê°€ `Running`ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
-   ì¸ê·¸ë ˆìŠ¤ ë¦¬ì†ŒìŠ¤ì˜ `ADDRESS` í•„ë“œì— ìœ íš¨í•œ IP ì£¼ì†Œê°€ í• ë‹¹ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
-   ì„œë¹„ìŠ¤ì˜ `EXTERNAL-IP`ê°€ `<pending>` ìƒíƒœê°€ ì•„ë‹ˆì–´ì•¼ í•©ë‹ˆë‹¤.

**Section sources**
- [README.md](file://README.md#L268-L276)
- [deploy-stg.sh](file://scripts/deploy-stg.sh#L91-L113)
- [deploy-prod.sh](file://scripts/deploy-prod.sh#L192-L218)

## ë¬¸ì œ ë°œìƒ ì‹œ ë¡¤ë°±

ë°°í¬ í›„ ë¬¸ì œê°€ ë°œìƒí•  ê²½ìš°, `deploy-prod.sh` ìŠ¤í¬ë¦½íŠ¸ì˜ `rollback` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ëª…ë ¹ì–´ ì˜ˆì œ

```bash
# ì´ì „ ë¦¬ë¹„ì „ìœ¼ë¡œ ë¡¤ë°±
./scripts/deploy-prod.sh rollback

# íŠ¹ì • ë¦¬ë¹„ì „ìœ¼ë¡œ ë¡¤ë°±
./scripts/deploy-prod.sh rollback 3
```

### ì˜ˆìƒ ì¶œë ¥

ë¡¤ë°± ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ìœ ì‚¬í•œ ì¶œë ¥ì„ ìƒì„±í•©ë‹ˆë‹¤:

```
[WARN] Rolling back fe-web-prod to revision 3...
[INFO] Rollback completed
[INFO] Deployment status after rollback:
NAME                             READY   STATUS    RESTARTS   AGE
fe-web-prod-6b7f8c9d4e-xyz78     1/1     Running   0          1m
```

### ì„±ê³µ ê¸°ì¤€

-   `helm history fe-web-prod -n plate-prod` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, ë¡¤ë°±ëœ ë¦¬ë¹„ì „ì´ ìµœì‹  ë¦´ë¦¬ìŠ¤ë¡œ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
-   `kubectl get pods -n plate-prod` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, ë¡¤ë°±ëœ ë²„ì „ì˜ íŒŒë“œê°€ `Running` ìƒíƒœì—¬ì•¼ í•©ë‹ˆë‹¤.
-   ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‘ì´ ì´ì „ì˜ ì•ˆì •ì ì¸ ìƒíƒœë¡œ ë³µêµ¬ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

**Section sources**
- [README.md](file://README.md#L246)
- [deploy-prod.sh](file://scripts/deploy-prod.sh#L277-L281)