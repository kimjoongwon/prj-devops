# Ingress Values - Staging
# plate-stg namespace의 모든 서비스 ingress 관리

# App name (default: plate)
appName: plate

# Service names (actual service names in the cluster)
services:
  frontend:
    name: "plate-fe-web-stg"  # Release name from ArgoCD
    port: 80
  backend:
    name: "plate-be-server-stg"  # Release name from ArgoCD
    port: 8080

ingress:
  enabled: true
  name: "cocdev-ingress"
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    ingress.kubernetes.io/ssl-redirect: "false"  # Allow HTTP for staging
    nginx.ingress.kubernetes.io/rate-limit: "100"
    nginx.ingress.kubernetes.io/rate-limit-window: "1m"
  
  hosts:
    - host: stg.cocdev.co.kr
      paths:
        # Frontend
        - path: /
          pathType: Prefix
          backend:
            service:
              name: frontend
              port:
                number: 80
        # Backend API
        - path: /api
          pathType: Prefix
          backend:
            service:
              name: backend
              port:
                number: 8080
  
  tls:
    - secretName: web-stg-tls
      hosts:
        - stg.cocdev.co.kr