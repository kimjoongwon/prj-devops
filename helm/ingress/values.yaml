# 공용 Ingress Chart 기본 값 (Production)
# 목적: plate-stg / plate-prod 네임스페이스의 대표 서비스(frontend, backend)를 단일 Ingress 리소스로 노출
# 환경별 차이: host / TLS secret / ssl-redirect 정책 (staging 은 values-stg.yaml 참고)

# App name (default: plate)
appName: plate

# Service names (actual service names in the cluster)
services: # 실제 Kubernetes Service 이름과 포트 매핑 (ArgoCD Release 명 기준)
  frontend:
    name: "plate-web-prod" # 프론트엔드 서비스
    port: 80
  backend:
    name: "plate-server-prod"
    port: 80
  admin:
    name: "plate-admin-prod"
    port: 80

ingress:
  enabled: true
  name: "cocdev-ingress" # 생성될 Ingress 객체명
  className: "nginx" # IngressClass (컨트롤러 식별)
  annotations: # 보안/성능/SSL 관련 어노테이션
    cert-manager.io/cluster-issuer: "letsencrypt-prod" # 프로덕션 실서명 인증서
    ingress.kubernetes.io/ssl-redirect: "false" # HTTP -> HTTPS 리다이렉트
    acme.cert-manager.io/http01-edit-in-place: "true"
  hosts:
    - host: cocdev.co.kr # 메인 도메인 (A 레코드 -> Ingress Controller LB)
      paths:
        # 프런트엔드 전체 경로
        - path: /
          pathType: Prefix
          backend:
            service:
              name: frontend
              port:
                number: 80
        # API 경로 (백엔드 서비스로 프록시)
        - path: /api
          pathType: Prefix
          backend:
            service:
              name: backend
              port:
                number: 80
        # /admin prefix -> 관리자 페이지
        - path: /admin
          pathType: Prefix
          backend:
            service:
              name: admin
              port:
                number: 80

  tls:
    - secretName: web-prod-tls # cert-manager 가 관리하는 프로덕션 TLS 시크릿
      hosts:
        - cocdev.co.kr # SAN / CN 매칭 호스트 목록
