# Staging environment specific values
# Override default values for staging environment

# Target namespaces - staging only
global:
  namespaces:
    - plate-stg

# Environment-specific configuration
environments:
  staging:
    namespace: "plate-stg"
    remoteRef:
      key: "server/staging"

# External Secrets configuration for staging
externalSecrets:
  secretStore:
    name: "openbao-env-staging"
    labels:
      environment: staging
      tier: non-production
    annotations:
      description: "OpenBao SecretStore for staging environment"

  externalSecret:
    name: "app-env-secrets-staging"
    refreshInterval: "30m" # More frequent refresh for staging
    target:
      name: "app-env-secrets"
      template:
        metadata:
          labels:
            environment: staging
            tier: non-production

    # Staging-specific secret data mapping
    data:
      - secretKey: "APP_PORT"
        remoteRef:
          key: "server/staging"
          property: "APP_PORT"
      - secretKey: "APP_NAME"
        remoteRef:
          key: "server/staging"
          property: "APP_NAME"
      - secretKey: "APP_ADMIN_EMAIL"
        remoteRef:
          key: "server/staging"
          property: "APP_ADMIN_EMAIL"
      - secretKey: "API_PREFIX"
        remoteRef:
          key: "server/staging"
          property: "API_PREFIX"
      - secretKey: "APP_FALLBACK_LANGUAGE"
        remoteRef:
          key: "server/staging"
          property: "APP_FALLBACK_LANGUAGE"
      - secretKey: "APP_HEADER_LANGUAGE"
        remoteRef:
          key: "server/staging"
          property: "APP_HEADER_LANGUAGE"
      - secretKey: "FRONTEND_DOMAIN"
        remoteRef:
          key: "server/staging"
          property: "FRONTEND_DOMAIN"
      - secretKey: "BACKEND_DOMAIN"
        remoteRef:
          key: "server/staging"
          property: "BACKEND_DOMAIN"
      - secretKey: "NODE_ENV"
        remoteRef:
          key: "server/staging"
          property: "NODE_ENV"
      - secretKey: "AWS_ACCESS_KEY_ID"
        remoteRef:
          key: "server/staging"
          property: "AWS_ACCESS_KEY_ID"
      - secretKey: "AWS_SECRET_ACCESS_KEY"
        remoteRef:
          key: "server/staging"
          property: "AWS_SECRET_ACCESS_KEY"
      - secretKey: "AWS_REGION"
        remoteRef:
          key: "server/staging"
          property: "AWS_REGION"
      - secretKey: "AWS_S3_BUCKET_NAME"
        remoteRef:
          key: "server/staging"
          property: "AWS_S3_BUCKET_NAME"
      - secretKey: "SMTP_HOST"
        remoteRef:
          key: "server/staging"
          property: "SMTP_HOST"
      - secretKey: "SMTP_PORT"
        remoteRef:
          key: "server/staging"
          property: "SMTP_PORT"
      - secretKey: "SMTP_USERNAME"
        remoteRef:
          key: "server/staging"
          property: "SMTP_USERNAME"
      - secretKey: "SMTP_PASSWORD"
        remoteRef:
          key: "server/staging"
          property: "SMTP_PASSWORD"
      - secretKey: "SMTP_SENDER"
        remoteRef:
          key: "server/staging"
          property: "SMTP_SENDER"
      - secretKey: "AUTH_JWT_SECRET"
        remoteRef:
          key: "server/staging"
          property: "AUTH_JWT_SECRET"
      - secretKey: "AUTH_JWT_TOKEN_EXPIRES_IN"
        remoteRef:
          key: "server/staging"
          property: "AUTH_JWT_TOKEN_EXPIRES_IN"
      - secretKey: "AUTH_JWT_TOKEN_REFRESH_IN"
        remoteRef:
          key: "server/staging"
          property: "AUTH_JWT_TOKEN_REFRESH_IN"
      - secretKey: "AUTH_JWT_SALT_ROUNDS"
        remoteRef:
          key: "server/staging"
          property: "AUTH_JWT_SALT_ROUNDS"
      - secretKey: "CORS_ENABLED"
        remoteRef:
          key: "server/staging"
          property: "CORS_ENABLED"
      - secretKey: "DATABASE_URL"
        remoteRef:
          key: "server/staging"
          property: "DATABASE_URL"
      - secretKey: "DIRECT_URL"
        remoteRef:
          key: "server/staging"
          property: "DIRECT_URL"

# Resource limits for staging (lighter than production)
resources:
  limits:
    cpu: 50m
    memory: 64Mi
  requests:
    cpu: 5m
    memory: 32Mi

# Harbor configuration for staging
harbor:
  enabled: true
  refreshInterval: "30m" # More frequent refresh for staging
  staging:
    remoteRef:
      key: "harbor/staging"

# OpenBao token configuration
openbao:
  token:
    create: true
    value: "cy5nOHVDVmZISHBiMDhvZDR2d1NydWNISk4="
    annotations:
      description: "OpenBao token for staging environment"
