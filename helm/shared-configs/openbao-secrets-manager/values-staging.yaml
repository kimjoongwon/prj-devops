# Staging environment specific values
# Override default values for staging environment

# Target namespaces - staging only
global:
  namespaces:
    - plate-stg

# Environment-specific configuration
environments:
  staging:
    namespace: "plate-stg"
    remoteRef:
      key: "server/staging"

# External Secrets configuration for staging
externalSecrets:
  secretStore:
    name: "openbao-env-staging"
    labels:
      environment: staging
      tier: non-production
    annotations:
      description: "OpenBao SecretStore for staging environment"

  externalSecret:
    name: "app-env-secrets-staging"
    refreshInterval: "30m" # More frequent refresh for staging
    target:
      name: "app-env-secrets"
      template:
        metadata:
          labels:
            environment: staging
            tier: non-production

    # dataFrom을 사용하여 OpenBao KV(server/staging)의 모든 키-값을 자동으로 가져옴
    # 개별 data 매핑이 더 이상 필요하지 않음

# Resource limits for staging (lighter than production)
resources:
  limits:
    cpu: 50m
    memory: 64Mi
  requests:
    cpu: 5m
    memory: 32Mi

# Harbor configuration for staging
harbor:
  enabled: true
  refreshInterval: "30m" # More frequent refresh for staging
  staging:
    remoteRef:
      key: "harbor/staging"

# OpenBao token configuration
# 토큰은 ./scripts/openbao/create-token.sh 스크립트로 Kubernetes Secret 생성
openbao:
  token:
    create: false
    annotations:
      description: "OpenBao token for staging environment"

# NOTE: 클러스터 레벨 시크릿 관리는 openbao-cluster-secrets-manager로 분리됨
# ClusterSecretStore, ClusterExternalSecret 설정은 해당 차트 참조
